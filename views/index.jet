<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="google-client-id" content="{{ GoogleClientID }}">
    <title>dailynotes</title>
    <meta name="description" content="Minimalist offline-first PWA for daily work notes. Organize by context, sync with Google Drive.">
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#485fc7" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0d1117" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="/static/icons/apple-touch-icon.png">
    <link rel="icon" href="/static/icons/icon-72x72.png">
    <script>
        // Initialize theme immediately to prevent flash
        const theme = localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
        // Expose Google Client ID for modules
        window.__GOOGLE_CLIENT_ID__ = "{{ GoogleClientID }}";
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/app.css">
    <style>
        /* Minimal inline styles for critical rendering */
        /* Critical CSS for preventing layout shift */
        #auth-section { display: none; }
        #auth-section.visible { display: flex; }
        #app-section { display: block; height: 100%; }

        /* Skeleton states - must be inline for initial render */
        .skeleton-loader { display: none; }
        #app-section:not(.visible) .skeleton-loader { display: block; }
        #app-section.visible .skeleton-loader { display: none !important; }
        #app-section:not(.visible) .app-content { display: none; }
        #app-section.visible .app-content { display: block; }

        /* Landing loader - hidden by default */
        #landing-loader { display: none !important; }
        #landing-loader.visible { display: flex !important; }
    </style>
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <section id="auth-section" role="main" aria-label="Authentication">
        <section class="hero landing-hero">
            <div class="hero-head">
                <nav class="navbar">
                    <div class="container">
                        <div class="navbar-brand" style="flex: 1; justify-content: space-between; align-items: center;">
                            <a class="navbar-item" href="/" style="flex: 0;">
                                <strong>dailynotes.dev</strong>
                            </a>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <a href="https://github.com/gmoqa/daily-notes" target="_blank" rel="noopener" class="github-star-button">
                                    <svg height="16" width="16" viewBox="0 0 16 16" fill="currentColor" style="display: inline-block; vertical-align: text-bottom;">
                                        <path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"/>
                                    </svg>
                                    <span>Star on GitHub</span>
                                </a>
                                <button id="landing-theme-toggle" class="button is-ghost" style="font-size: 1.25rem; padding: 0.5rem; border: none;" title="Toggle theme">
                                    <span class="material-symbols-outlined">dark_mode</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>

            <div class="hero-body">
                <div class="container">
                    <div class="columns is-vcentered">
                        <div class="column is-10 is-offset-1">
                            <div class="has-text-centered mb-2">
                                <div class="badge">
                                    <svg class="badge-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14 2 14 8 20 8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <polyline points="10 9 9 9 8 9"/>
                                    </svg>
                                    <span>Offline-first • Auto-sync • Your Drive</span>
                                </div>
                                <h1 class="title is-1 hero-title">
                                    Your daily work notes,<br>organized & synced
                                </h1>
                                <p class="subtitle is-4 hero-subtitle">
                                    Minimalist workspace for tracking daily progress. Works offline, syncs to Google Drive, organized by projects.
                                </p>
                                <div class="buttons is-centered mb-3">
                                    <button onclick="signInWithGoogle()" class="cta-button">
                                        <span class="icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                                            </svg>
                                        </span>
                                        <span>Get Started with Google</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Screenshot above footer -->
        <div class="screenshot-container">
            <div class="screenshot-wrapper">
                <img src="/static/images/screenshot_light.png" alt="dailynotes.dev interface" class="screenshot-image screenshot-light">
                <img src="/static/images/screenshot_dark.png" alt="dailynotes.dev interface" class="screenshot-image screenshot-dark">
            </div>
        </div>

        <footer class="landing-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-left">
                        <p class="footer-text">
                            Built by <a href="https://github.com/gmoqa" target="_blank" rel="noopener" class="footer-link">@gmoqa</a>
                        </p>
                    </div>
                    <div class="footer-right">
                        <p class="footer-text">
                            <a href="https://github.com/gmoqa/daily-notes" target="_blank" rel="noopener" class="footer-link">
                                <svg class="footer-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                Contribute on GitHub
                            </a>
                            <span class="footer-separator">•</span>
                            <a href="https://github.com/gmoqa/daily-notes/blob/master/LICENSE" target="_blank" rel="noopener" class="footer-link">GPL-3.0 License</a>
                        </p>
                    </div>
                </div>
            </div>
        </footer>
    </section>

    <section id="app-section" role="main" aria-label="Application">
        <!-- Mobile Navigation -->
        <nav class="mobile-nav" aria-label="Mobile navigation">
            <div class="mobile-nav-actions" id="mobile-context-selector">
                <div class="field" style="margin: 0; flex: 1;">
                    <div class="control context-select-wrapper">
                        <div class="context-color-indicator" id="mobile-context-color-indicator" role="presentation" aria-hidden="true"></div>
                        <select id="mobile-context-select" class="context-select" required aria-label="Select project context">
                            <option value="">Select context...</option>
                        </select>
                    </div>
                </div>
                <button onclick="showNewContextModal()" class="button is-primary is-small" style="color: white; white-space: nowrap;" title="New context" id="mobile-new-context-btn">
                    <span class="icon is-small">
                        <span class="material-symbols-outlined">add</span>
                    </span>
                    <span>New</span>
                </button>
            </div>
            <div class="mobile-nav-buttons">
                <button id="mobile-notes-toggle" class="mobile-nav-button" aria-label="Toggle notes list" title="Notes">
                    <span class="material-symbols-outlined">list</span>
                </button>
                <button id="mobile-calendar-toggle" class="mobile-nav-button" aria-label="Toggle calendar" title="Calendar">
                    <span class="material-symbols-outlined">calendar_month</span>
                </button>
            </div>
        </nav>

        <!-- Mobile Overlays -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        <div class="calendar-overlay" id="calendar-overlay"></div>

        <div class="app-layout" id="main-content">
            <aside class="sidebar" role="navigation" aria-label="Notes sidebar" style="background: var(--bulma-scheme-main-bis);">
                <!-- Mobile Close Button -->
                <button class="mobile-panel-close" id="sidebar-close" aria-label="Close sidebar">
                    <span class="material-symbols-outlined">close</span>
                </button>

                <!-- Skeleton Loader -->
                <div class="skeleton-loader p-4" aria-hidden="true">
                    <div class="skeleton skeleton-button mb-3"></div>
                    <div class="skeleton skeleton-button mb-4"></div>
                    <div class="skeleton skeleton-text" style="width: 40%;"></div>
                    <div class="skeleton skeleton-text mb-3"></div>
                    <div class="skeleton skeleton-text mb-3"></div>
                    <div class="skeleton skeleton-text mb-3"></div>
                    <div class="skeleton skeleton-text mb-3"></div>
                    <div class="skeleton skeleton-text" style="width: 60%;"></div>
                </div>

                <!-- Actual Content -->
                <div class="app-content">
                    <div class="p-4" id="desktop-context-selector">
                        <div class="field">
                            <label for="context-select" class="sr-only">Select context</label>
                            <div class="control context-select-wrapper">
                                <div class="context-color-indicator" id="context-color-indicator" role="presentation" aria-hidden="true"></div>
                                <select id="context-select" class="context-select" required aria-label="Select project context">
                                    <option value="">Select context...</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="showNewContextModal()" class="button is-primary is-small is-fullwidth" style="color: white;">
                            <span class="icon">
                                <span class="material-symbols-outlined">add</span>
                            </span>
                            <span>New context</span>
                        </button>
                    </div>

                    <div class="sidebar-content">
                        <nav class="menu" aria-label="Notes list">
                            <p class="menu-label">Notes</p>
                            <ul class="menu-list" id="notes-list" role="list">
                                <li class="has-text-centered py-6 has-text-grey-light" role="listitem">Select a context to view notes</li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </aside>

            <section class="main-section section" role="region" aria-label="Note editor">
                <div class="container is-fluid">
                    <!-- Skeleton Loader -->
                    <div class="skeleton-loader" aria-hidden="true">
                        <div class="editor-wrapper">
                            <div class="skeleton skeleton-title" style="width: 30%;"></div>
                            <div class="skeleton skeleton-text mb-2"></div>
                            <div class="skeleton skeleton-text mb-2"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 80%;"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 90%;"></div>
                            <div class="skeleton skeleton-text mb-2"></div>
                            <div class="skeleton skeleton-text mb-2" style="width: 70%;"></div>
                        </div>
                    </div>

                    <!-- Actual Content -->
                    <div class="app-content">
                        <div class="controls">
                            <label for="date-picker" class="sr-only">Select date</label>
                            <div style="position: relative; display: inline-block; width: 100%;">
                                <input type="date" id="date-picker" class="input" aria-label="Select date for note" style="color: transparent;" />
                                <div id="date-picker-display" style="position: absolute; top: 50%; left: 12px; transform: translateY(-50%); pointer-events: none; color: var(--bulma-input-color); font-size: 1rem;"></div>
                            </div>
                        </div>
                        <div class="editor-wrapper">
                            <label for="note-editor" class="sr-only">Note content</label>
                            <textarea
                                id="note-editor"
                                class="editor-textarea"
                                placeholder="Select a context to start writing notes..."
                                aria-label="Note editor"
                                aria-describedby="save-indicator"
                                disabled
                            ></textarea>
                        </div>
                        <div class="save-indicator px-5 pb-4" id="save-indicator"></div>
                    </div>
                </div>
            </section>

            <aside class="calendar-panel" role="complementary" aria-label="Calendar and user settings" style="background: var(--bulma-scheme-main-bis);">
                <!-- Mobile Close Button -->
                <button class="mobile-panel-close" id="calendar-close" aria-label="Close calendar">
                    <span class="material-symbols-outlined">close</span>
                </button>

                <!-- Skeleton Loader -->
                <div class="skeleton-loader p-5" aria-hidden="true">
                    <div class="is-flex is-justify-content-space-between mb-4">
                        <div style="flex: 1;">
                            <div class="skeleton skeleton-title mb-2" style="width: 60%;"></div>
                            <div class="skeleton skeleton-text" style="width: 80%;"></div>
                        </div>
                        <div class="skeleton skeleton-circle" style="width: 3rem; height: 3rem;"></div>
                    </div>
                    <hr>
                    <div class="skeleton skeleton-text mb-4" style="width: 50%; margin: 0 auto;"></div>
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.25rem;">
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                        <div class="skeleton" style="aspect-ratio: 1;"></div>
                    </div>
                </div>

                <!-- Actual Content -->
                <div class="app-content">
                    <div class="content">
                        <div class="mb-4">
                            <div class="is-flex is-justify-content-space-between is-align-items-center">
                                <div>
                                    <p class="title is-4 mb-1" id="current-time">00:00:00</p>
                                    <p class="subtitle is-6 mb-0 has-text-grey" id="current-date">Loading...</p>
                                </div>
                                <button id="theme-toggle-menu" class="button" style="font-size: 1.5rem; padding: 0.5rem;" title="Toggle theme">
                                    <span class="material-symbols-outlined">dark_mode</span>
                                </button>
                            </div>
                        </div>
                        <hr>
                        <div class="is-flex is-justify-content-space-between is-align-items-center mb-4">
                            <button class="button is-small is-ghost" id="prev-month">
                                <span class="material-symbols-outlined">chevron_left</span>
                            </button>
                            <p class="title is-6 mb-0" id="calendar-month-year"></p>
                            <button class="button is-small is-ghost" id="next-month">
                                <span class="material-symbols-outlined">chevron_right</span>
                            </button>
                        </div>
                        <div class="calendar-grid" id="calendar-grid"></div>
                    </div>
                </div>
                <div class="user-settings-btn">
                    <div class="dropdown is-up is-fullwidth" id="user-dropdown">
                        <div class="dropdown-trigger is-fullwidth">
                            <button class="button is-small is-fullwidth is-justify-content-space-between" aria-haspopup="true" aria-controls="user-dropdown-menu" id="user-dropdown-button">
                                <span class="icon is-small">
                                    <span class="material-symbols-outlined" style="font-size: 18px;">account_circle</span>
                                </span>
                                <span id="user-email" style="flex: 1; text-align: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin: 0 0.5rem;">Loading...</span>
                                <span class="icon is-small" id="user-dropdown-icon">
                                    <span class="material-symbols-outlined" style="font-size: 18px;">expand_less</span>
                                </span>
                            </button>
                        </div>
                        <div class="dropdown-menu is-fullwidth" id="user-dropdown-menu" role="menu">
                            <div class="dropdown-content">
                                <a class="dropdown-item" id="settings-menu-item">
                                    <span class="icon-text" style="display: flex; align-items: center; gap: 0.5rem;">
                                        <span class="icon is-small" style="margin: 0;">
                                            <span class="material-symbols-outlined" style="font-size: 16px;">settings</span>
                                        </span>
                                        <span>Settings</span>
                                    </span>
                                </a>
                                <hr class="dropdown-divider">
                                <a class="dropdown-item" id="signout-menu-item">
                                    <span class="icon-text" style="display: flex; align-items: center; gap: 0.5rem;">
                                        <span class="icon is-small" style="margin: 0;">
                                            <span class="material-symbols-outlined" style="font-size: 16px;">logout</span>
                                        </span>
                                        <span>Logout</span>
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </section>

    <div id="sync-status" class="sync-status">
        <div class="spinner"></div>
        <span id="sync-status-text">Syncing...</span>
    </div>

    <div id="landing-loader" class="landing-loader">
        <div class="spinner-large"></div>
        <p>Signing in...</p>
    </div>

    <div class="modal" id="context-modal">
        <div class="modal-background" onclick="closeContextModal()"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title">New Context</p>
                <button class="delete" aria-label="close" onclick="closeContextModal()"></button>
            </header>
            <section class="modal-card-body">
                <div class="field">
                    <label class="label">Name</label>
                    <div class="control">
                        <input type="text" class="input" id="context-name" placeholder="e.g., Acme Corp, Project Alpha" autofocus />
                    </div>
                </div>
                <div class="field">
                    <label class="label">Color</label>
                    <div class="control">
                        <input type="color" class="input" id="context-color" value="#485fc7" />
                    </div>
                </div>
            </section>
            <footer class="modal-card-foot is-flex is-justify-content-flex-end">
                <button onclick="closeContextModal()" class="button">Cancel</button>
                <button onclick="createContext()" class="button is-primary">
                    <span class="icon">
                        <span class="material-symbols-outlined">add</span>
                    </span>
                    <span>Create</span>
                </button>
            </footer>
        </div>
    </div>

    <div class="modal" id="settings-modal">
        <div class="modal-background" onclick="closeSettingsModal()"></div>
        <div class="modal-card" style="max-width: 500px;">
            <header class="modal-card-head" style="padding: 1rem 1.5rem;">
                <p class="modal-card-title" style="font-size: 1rem; font-weight: 600;">Settings</p>
                <button class="delete is-small" aria-label="close" onclick="closeSettingsModal()"></button>
            </header>
            <section class="modal-card-body">
                <div class="field is-horizontal">
                    <div class="field-label is-small">
                        <label class="label">Week Start</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <div class="select is-small is-fullwidth">
                                    <select id="week-start-select">
                                        <option value="0">Sunday</option>
                                        <option value="1">Monday</option>
                                        <option value="2">Tuesday</option>
                                        <option value="3">Wednesday</option>
                                        <option value="4">Thursday</option>
                                        <option value="5">Friday</option>
                                        <option value="6">Saturday</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label is-small">
                        <label class="label">Timezone</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <div class="select is-small is-fullwidth">
                                    <select id="timezone-select">
                                        <option value="UTC">UTC</option>
                                        <optgroup label="Americas">
                                            <option value="America/New_York">New York (EST/EDT)</option>
                                            <option value="America/Chicago">Chicago (CST/CDT)</option>
                                            <option value="America/Denver">Denver (MST/MDT)</option>
                                            <option value="America/Los_Angeles">Los Angeles (PST/PDT)</option>
                                            <option value="America/Mexico_City">Mexico City</option>
                                            <option value="America/Bogota">Bogotá</option>
                                            <option value="America/Lima">Lima</option>
                                            <option value="America/Santiago">Santiago</option>
                                            <option value="America/Buenos_Aires">Buenos Aires</option>
                                            <option value="America/Sao_Paulo">São Paulo</option>
                                            <option value="America/Caracas">Caracas</option>
                                        </optgroup>
                                        <optgroup label="Europe">
                                            <option value="Europe/London">London (GMT/BST)</option>
                                            <option value="Europe/Paris">Paris (CET/CEST)</option>
                                            <option value="Europe/Berlin">Berlin (CET/CEST)</option>
                                            <option value="Europe/Madrid">Madrid (CET/CEST)</option>
                                            <option value="Europe/Rome">Rome (CET/CEST)</option>
                                            <option value="Europe/Moscow">Moscow (MSK)</option>
                                        </optgroup>
                                        <optgroup label="Asia">
                                            <option value="Asia/Dubai">Dubai (GST)</option>
                                            <option value="Asia/Kolkata">Mumbai/Delhi (IST)</option>
                                            <option value="Asia/Shanghai">Shanghai (CST)</option>
                                            <option value="Asia/Hong_Kong">Hong Kong (HKT)</option>
                                            <option value="Asia/Tokyo">Tokyo (JST)</option>
                                            <option value="Asia/Seoul">Seoul (KST)</option>
                                            <option value="Asia/Singapore">Singapore (SGT)</option>
                                        </optgroup>
                                        <optgroup label="Pacific">
                                            <option value="Australia/Sydney">Sydney (AEDT/AEST)</option>
                                            <option value="Australia/Melbourne">Melbourne (AEDT/AEST)</option>
                                            <option value="Pacific/Auckland">Auckland (NZDT/NZST)</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label is-small">
                        <label class="label">Date Format</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <div class="select is-small is-fullwidth">
                                    <select id="date-format-select">
                                        <option value="DD-MM-YY">DD-MM-YY (24-10-25)</option>
                                        <option value="MM-DD-YY">MM-DD-YY (10-24-25)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="field is-horizontal">
                    <div class="field-label is-small">
                        <label class="label">Unique Context Mode</label>
                    </div>
                    <div class="field-body">
                        <div class="field">
                            <div class="control">
                                <label class="switch">
                                    <input type="checkbox" id="unique-context-mode-switch">
                                    <span class="slider round"></span>
                                </label>
                                <p class="help is-size-7" style="margin-top: 0.5rem;">Hide context selector and use your first context automatically</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <footer class="modal-card-foot is-flex is-justify-content-flex-end" style="gap: 0.75rem; padding: 1rem 1.5rem;">
                <button onclick="closeSettingsModal()" class="button is-small" id="settings-cancel-btn">Cancel</button>
                <button onclick="saveSettings()" class="button is-small is-primary" id="settings-save-btn" style="color: white;">
                    <span class="icon is-small" id="settings-save-icon">
                        <span class="material-symbols-outlined" style="font-size: 16px;">check</span>
                    </span>
                    <span class="spinner" id="settings-save-spinner" style="display: none;"></span>
                    <span id="settings-save-text">Save</span>
                </button>
            </footer>
        </div>
    </div>

    <div class="modal" id="onboarding-modal">
        <div class="modal-background"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title">Welcome to dailynotes.dev</p>
            </header>
            <section class="modal-card-body">
                <div class="content">
                    <h4>Quick Start Guide</h4>
                    <p><strong>1. Create a Context</strong><br>
                    Contexts help you organize notes by project or client. Click "+ New Context" to get started.</p>

                    <p><strong>2. Write Notes</strong><br>
                    Select a context and start writing. Notes auto-save locally and sync to your Google Drive every 15 seconds.</p>

                    <p><strong>3. Navigate</strong><br>
                    Use the calendar or notes list to browse previous entries. Your last used context is automatically selected when you return.</p>

                    <p><strong>4. Offline-First</strong><br>
                    The app works without internet. Changes sync automatically when you're back online.</p>
                </div>
            </section>
            <footer class="modal-card-foot is-justify-content-center">
                <button onclick="closeOnboardingModal()" class="button is-primary">Got it!</button>
            </footer>
        </div>
    </div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script type="module" src="/static/js/main.js"></script>

    <script>
        // Service Worker registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/static/sw.js');
        }

        // Landing page theme toggle
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('landing-theme-toggle');
            if (themeToggle) {
                const updateThemeIcon = (theme) => {
                    const icon = themeToggle.querySelector('.material-symbols-outlined');
                    if (icon) {
                        icon.textContent = theme === 'dark' ? 'light_mode' : 'dark_mode';
                    }
                };

                // Set initial icon
                const currentTheme = document.documentElement.getAttribute('data-theme');
                updateThemeIcon(currentTheme);

                // Handle click
                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    updateThemeIcon(newTheme);
                });
            }
        });
    </script>
</body>
</html>
